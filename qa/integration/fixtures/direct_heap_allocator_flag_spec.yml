---
services:
  - logstash
config: |-
 input {
   http {
     response_headers => {"Content-Type" => "application/json"}
     ecs_compatibility => disabled
   }
 }
  
 filter {
   ruby {
     init => "Thread.new { loop { logger.info 'Direct mem: ' + Java::io.netty.buffer.ByteBufAllocator::DEFAULT.metric.used_direct_memory.to_s + ' - Heap mem: ' + Java::io.netty.buffer.ByteBufAllocator::DEFAULT.metric.used_heap_memory.to_s; sleep 5 } }"
     code => ""
   }
 }
 
 output {
   sink {}
 }
